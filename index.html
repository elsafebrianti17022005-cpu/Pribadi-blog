<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dark Private Space</title>

<style>
body{
  margin:0;
  font-family:Segoe UI, sans-serif;
  background:linear-gradient(180deg,#0f0f0f,#1a1a1a);
  color:white;
}

header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px;
  background:#121212;
  position:sticky;
  top:0;
  z-index:10;
}

.title{font-weight:600;}
.menu-btn{font-size:22px;cursor:pointer;}

.dropdown{
  display:none;
  position:absolute;
  right:15px;
  top:60px;
  background:#1f1f1f;
  padding:10px;
  border-radius:8px;
  border:1px solid #333;
}

.container{max-width:500px;margin:auto;padding:15px;}

.card{
  background:#181818;
  border:1px solid #2a2a2a;
  padding:15px;
  border-radius:14px;
  margin-bottom:15px;
  animation:fadeIn 0.4s ease;
}

@keyframes fadeIn{
  from{opacity:0; transform:translateY(10px);}
  to{opacity:1; transform:translateY(0);}
}

textarea{
  width:100%;
  padding:8px;
  background:#111;
  border:1px solid #333;
  color:white;
  border-radius:8px;
}

button{
  margin-top:6px;
  padding:5px 10px;
  background:#2c2c2c;
  border:none;
  color:white;
  cursor:pointer;
  border-radius:6px;
}

.media-container{
  display:flex;
  overflow-x:auto;
  gap:10px;
  margin-top:10px;
}

.media-item{
  position:relative;
  min-width:100%;
}

.media-item img,
.media-item video,
.media-item audio{
  width:100%;
  border-radius:10px;
}

.media-item button{
  position:absolute;
  top:5px;
  right:5px;
  font-size:12px;
  padding:3px 6px;
}

.lock-screen{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  background:linear-gradient(180deg,#000,#111);
}
</style>
</head>
<body>

<div id="lockScreen" class="lock-screen">
<h2>ðŸ”’ Private Access</h2>
<input type="password" id="lockInput">
<button onclick="unlock()">Masuk</button>
</div>

<div id="app" style="display:none;">

<header>
<div class="title">Dark Space</div>
<div>
<span class="menu-btn" onclick="toggleMenu()">â‹®</span>
<div class="dropdown" id="dropdown">
<button onclick="logout()">Keluar</button>
</div>
</div>
</header>

<div class="container">

<div class="card">
<textarea id="textInput" placeholder="Tulis sesuatu..."></textarea>
<input type="file" id="mediaInput" multiple accept="image/*,video/*,audio/*">
<button onclick="createPost()">Posting</button>
</div>

<div id="feed"></div>

</div>
</div>

<script>

let posts=[];

/* LOCK */
function unlock(){
  if(lockInput.value==="31082025"){
    lockScreen.style.display="none";
    app.style.display="block";
  }else alert("Password salah");
}

function logout(){ location.reload(); }

function toggleMenu(){
  dropdown.style.display = dropdown.style.display==="block"?"none":"block";
}

/* CREATE */
function createPost(){
  const text=textInput.value.trim();
  const files=[...mediaInput.files];

  if(!text && files.length===0){
    alert("Kosong!");
    return;
  }

  const newPost={ text:text, media:[] };

  files.forEach(file=>{
    newPost.media.push({
      type:file.type.split("/")[0],
      url:URL.createObjectURL(file)
    });
  });

  posts.unshift(newPost);
  render();

  textInput.value="";
  mediaInput.value="";
}

/* EDIT TEXT DIRECT */
function editText(index,element){
  element.contentEditable=true;
  element.focus();

  element.onblur=()=>{
    posts[index].text=element.innerText;
    element.contentEditable=false;
  };
}

/* ADD MEDIA */
function addMedia(index){
  const input=document.createElement("input");
  input.type="file";
  input.multiple=true;
  input.accept="image/*,video/*,audio/*";

  input.onchange=()=>{
    [...input.files].forEach(file=>{
      posts[index].media.push({
        type:file.type.split("/")[0],
        url:URL.createObjectURL(file)
      });
    });
    render();
  };
  input.click();
}

/* REPLACE SPECIFIC MEDIA */
function replaceSpecificMedia(postIndex,mediaIndex){
  const input=document.createElement("input");
  input.type="file";
  input.accept="image/*,video/*,audio/*";

  input.onchange=()=>{
    const file=input.files[0];
    posts[postIndex].media[mediaIndex]={
      type:file.type.split("/")[0],
      url:URL.createObjectURL(file)
    };
    render();
  };
  input.click();
}

/* DELETE */
function deletePost(index){
  if(confirm("Hapus postingan?")){
    posts.splice(index,1);
    render();
  }
}

/* RENDER */
function render(){
  feed.innerHTML="";

  posts.forEach((post,index)=>{

    const card=document.createElement("div");
    card.className="card";

    if(post.text){
      const p=document.createElement("p");
      p.innerText=post.text;
      p.style.cursor="text";
      p.onclick=()=>editText(index,p);
      card.appendChild(p);
    }

    if(post.media.length>0){
      const mediaDiv=document.createElement("div");
      mediaDiv.className="media-container";

      post.media.forEach((m,i)=>{
        const wrapper=document.createElement("div");
        wrapper.className="media-item";

        let el;
        if(m.type==="image") el=document.createElement("img");
        if(m.type==="video"){ el=document.createElement("video"); el.controls=true;}
        if(m.type==="audio"){ el=document.createElement("audio"); el.controls=true;}
        el.src=m.url;

        const replaceBtn=document.createElement("button");
        replaceBtn.innerText="Ganti";
        replaceBtn.onclick=()=>replaceSpecificMedia(index,i);

        wrapper.appendChild(el);
        wrapper.appendChild(replaceBtn);
        mediaDiv.appendChild(wrapper);
      });

      card.appendChild(mediaDiv);
    }

    const addBtn=document.createElement("button");
    addBtn.innerText="Tambah Media";
    addBtn.onclick=()=>addMedia(index);

    const delBtn=document.createElement("button");
    delBtn.innerText="Hapus Post";
    delBtn.onclick=()=>deletePost(index);

    card.appendChild(addBtn);
    card.appendChild(delBtn);

    feed.appendChild(card);
  });
}

</script>

</body>
</html>